{"version":3,"sources":["../../../src/models/manager-model.js"],"names":["Schema","ManagerSchema","id","Number","userName","String","firstName","lastName","password","email","clubs","type","Types","ObjectId","ref","permissions","pre","next","manager","encrypt","then","value","runManagerValidations","model"],"mappings":";;;;;;;AAAA;;;;AACA;;;;AACA;;;;AAEA;;;;;;AAEA,IAAMA,SAAS,mBAASA,MAAxB;;AAEA,IAAMC,gBAAgB,IAAID,MAAJ,CAAW;AAC7BE,QAAIC,MADyB;AAE7BC,cAAUC,MAFmB;AAG7BC,eAAWD,MAHkB;AAI7BE,cAAUF,MAJmB;AAK7BG,cAAUH,MALmB;AAM7BI,WAAOJ,MANsB;AAO7BK,WAAO,CAAC,EAACC,MAAO,mBAASX,MAAT,CAAgBY,KAAhB,CAAsBC,QAA9B,EAAwCC,KAAM,MAA9C,EAAD,CAPsB;AAQ7BC,iBAAaV;AARgB,CAAX,CAAtB;;AAWAJ,cAAce,GAAd,CAAkB,MAAlB,EAA0B,UAASC,IAAT,EAAe;AACrC,QAAIC,UAAU,IAAd;;AAEA,qBAAOC,OAAP,CAAeD,QAAQV,QAAvB,EAAiCY,IAAjC,CAAsC,UAACC,KAAD,EAAW;AAC7CH,gBAAQV,QAAR,GAAmBa,KAAnB;AACAJ;AACH,KAHD;AAIH,CAPD;;AASA,mCAAiBK,qBAAjB,CAAuCrB,aAAvC;;QAESA,a,GAAAA,a;kBACM,mBAASsB,KAAT,CAAe,SAAf,EAA0BtB,aAA1B,C","file":"manager-model.js","sourcesContent":["import mongoose from 'mongoose';\r\nimport Crypto from '../services/crypto.service';\r\nimport { ClubSchema } from './club-model';\r\nimport Club from './club-model';\r\nimport ManagerValidator from './validations/manager-schema-validations';\r\n\r\nconst Schema = mongoose.Schema;\r\n\r\nconst ManagerSchema = new Schema({\r\n    id: Number,\r\n    userName: String,\r\n    firstName: String,\r\n    lastName: String,\r\n    password: String,\r\n    email: String,\r\n    clubs: [{type : mongoose.Schema.Types.ObjectId, ref : 'Club'}],\r\n    permissions: String\r\n});\r\n\r\nManagerSchema.pre('save', function(next) {\r\n    var manager = this;\r\n\r\n    Crypto.encrypt(manager.password).then((value) => {\r\n        manager.password = value;\r\n        next();\r\n    });\r\n});\r\n\r\nManagerValidator.runManagerValidations(ManagerSchema);\r\n\r\nexport { ManagerSchema };\r\nexport default mongoose.model('Manager', ManagerSchema);"]}