{"version":3,"sources":["../../../../src/server/routes/club.js"],"names":["router","Router","get","req","res","next","getAllClubs","then","clubs","status","json","console","log","catch","err","id","params","findCustomerById","find","_id","$in","customer"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAGA,IAAMA,SAAS,kBAAQC,MAAR,EAAf;;AAEAD,OAAOE,GAAP,CAAW,GAAX,EAAgB,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAChC,mBAAeC,WAAf,GACCC,IADD,CACO,iBAAS;AACZ,YAAGC,KAAH,EAAU;AACNJ,gBAAIK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBF,KAArB;AACH,SAFD,MAGK;AACDG,oBAAQC,GAAR,CAAa,oBAAb;AACAR,gBAAIK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBF,KAArB;AACH;AACJ,KATD,EAUCK,KAVD,CAUO,eAAO;AACVF,gBAAQC,GAAR,CAAYE,GAAZ;AACAV,YAAIK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBF,KAArB;AACH,KAbD;AAcH,CAfD;;AAiBAR,OAAOE,GAAP,CAAW,WAAX,EAAwB,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACxC,QAAMU,KAAKZ,IAAIa,MAAJ,CAAWD,EAAtB;;AAEA,uBAAmBE,gBAAnB,CAAoCF,EAApC,EACCR,IADD,CACM,oBAAY;AACd,4BAAUW,IAAV,CAAe,EAACC,KAAK,EAAEC,KAAKC,SAASb,KAAhB,EAAN,EAAf,EAA+CD,IAA/C,CAAoD,iBAAS;AACzDH,gBAAIK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEF,OAAQA,KAAV,EAArB;AACH,SAFD;AAGH,KALD;AAMH,CATD;;kBAaeR,M","file":"club.js","sourcesContent":["import express from 'express';\r\nimport mongoose from 'mongoose';\r\nimport Customer from '../.././models/user-model';\r\nimport Club from '../.././models/club-model';\r\nimport UserClub from '../.././models/user-club-model';\r\nimport CustomerRepository from '../.././database/repositories/customer.repository';\r\nimport ClubRepository from '../.././database/repositories/club.repository';\r\nimport ClubModel from '../.././models/club-model';\r\n\r\nconst router = express.Router();\r\n\r\nrouter.get('/', (req, res, next) => {\r\n    ClubRepository.getAllClubs()\r\n    .then( clubs => {\r\n        if(clubs) {\r\n            res.status(200).json(clubs);\r\n        }\r\n        else {\r\n            console.log( \"club.js: no clubs \");\r\n            res.status(200).json(clubs);\r\n        }\r\n    })\r\n    .catch(err => { \r\n        console.log(err);\r\n        res.status(500).json(clubs);\r\n    });\r\n});\r\n\r\nrouter.get('/user/:id', (req, res, next) => {\r\n    const id = req.params.id;\r\n\r\n    CustomerRepository.findCustomerById(id)\r\n    .then(customer => {\r\n        ClubModel.find({_id: { $in: customer.clubs }}).then(clubs => {\r\n            res.status(200).json({ clubs : clubs });\r\n        });\r\n    });\r\n});\r\n\r\n\r\n\r\nexport default router;"]}